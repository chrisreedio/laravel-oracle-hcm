<?php

namespace ChrisReedIO\OracleHCM\Data;

use ChrisReedIO\OracleHCM\Data\Traits\HasOracleID;

use function array_key_exists;

readonly class OracleAssignment extends OracleData
{
    use HasOracleID;

    public function __construct(
        public ?int $oracle_id,
        public string $assignment_number,
        public string $assignment_name,
        public ?string $action_code,
        public ?string $reason_code,
        public string $effective_start_date,
        public string $effective_end_date,
        public int $effective_sequence,
        public string $effective_latest_change,
        public ?int $business_unit_id,
        public ?string $business_unit_name,
        public ?string $assignment_type,
        public ?int $assignment_status_type_id,
        public ?string $assignment_status_type_code,
        public ?string $assignment_status_type,
        public ?string $system_person_type,
        public ?int $user_person_type_id,
        public ?string $user_person_type,
        public ?int $proposed_user_person_type_id,
        public ?string $proposed_user_person_type,
        public ?string $projected_start_date,
        public ?string $projected_end_date,
        public bool $primary_flag,
        public bool $primary_assignment_flag,
        public ?int $position_id,
        public ?string $position_code,
        public bool $synchronize_from_position_flag,
        public ?int $job_id,
        public ?string $job_code,
        public ?int $grade_id,
        public ?string $grade_code,
        public ?int $grade_ladder_id,
        public ?string $grade_ladder_name,
        public bool $grade_step_eligibility_flag,
        public ?int $grade_ceiling_step_id,
        public ?string $grade_ceiling_step,
        public ?int $department_id,
        public ?string $department_name,
        public ?int $reporting_establishment_id,
        public ?string $reporting_establishment_name,
        public ?int $location_id,
        public ?string $location_code,
        public bool $work_at_home_flag,
        public ?string $assignment_category,
        public ?string $worker_category,
        public ?string $permanent_temporary,
        public ?string $full_part_time,
        public bool $manager_flag,
        public ?string $hourly_salaried_code,
        public ?int $normal_hours,
        public ?string $frequency,
        public ?string $start_time,
        public ?string $end_time,
        public ?string $seniority_basis,
        public ?int $probation_period,
        public ?string $probation_period_unit,
        public ?string $probation_end_date,
        public ?int $notice_period,
        public ?string $notice_period_uom,
        public ?int $work_tax_address_id,
        public ?string $expense_check_send_to_address,
        public int $retirement_age,
        public ?string $retirement_date,
        public bool $labour_union_member_flag,
        public ?int $union_id,
        public ?string $union_name,
        public ?string $bargaining_unit_code,
        public ?int $collective_agreement_id,
        public ?string $collective_agreement_name,
        public ?int $contract_id,
        public ?string $contract_number,
        public ?string $internal_building,
        public ?string $internal_floor,
        public ?string $internal_office_number,
        public ?string $internal_mailstop,
        public ?string $default_expense_account,
        public ?string $people_group,
        public ?int $standard_working_hours,
        public ?string $standard_frequency,
        public ?string $created_by,
        public ?string $creation_date,
        public ?string $last_updated_by,
        public ?string $last_update_date,
        public ?array $managers,
    )
    {
        //
    }

    public static function fromArray(array $data): self
    {
        return new self(
            oracle_id: $data['AssignmentId'] ?? null,
            assignment_number: $data['AssignmentNumber'] ?? '',
            assignment_name: $data['AssignmentName'] ?? '',
            action_code: $data['ActionCode'] ?? null,
            reason_code: $data['ReasonCode'] ?? null,
            effective_start_date: $data['EffectiveStartDate'] ?? '',
            effective_end_date: $data['EffectiveEndDate'] ?? '',
            effective_sequence: $data['EffectiveSequence'] ?? 0,
            effective_latest_change: $data['EffectiveLatestChange'] ?? '',
            business_unit_id: $data['BusinessUnitId'] ?? null,
            business_unit_name: $data['BusinessUnitName'] ?? null,
            assignment_type: $data['AssignmentType'] ?? null,
            assignment_status_type_id: $data['AssignmentStatusTypeId'] ?? null,
            assignment_status_type_code: $data['AssignmentStatusTypeCode'] ?? null,
            assignment_status_type: $data['AssignmentStatusType'] ?? null,
            system_person_type: $data['SystemPersonType'] ?? null,
            user_person_type_id: $data['UserPersonTypeId'] ?? null,
            user_person_type: $data['UserPersonType'] ?? null,
            proposed_user_person_type_id: $data['ProposedUserPersonTypeId'] ?? null,
            proposed_user_person_type: $data['ProposedUserPersonType'] ?? null,
            projected_start_date: $data['ProjectedStartDate'] ?? null,
            projected_end_date: $data['ProjectedEndDate'] ?? null,
            primary_flag: $data['PrimaryFlag'] ?? false,
            primary_assignment_flag: $data['PrimaryAssignmentFlag'] ?? false,
            position_id: $data['PositionId'] ?? null,
            position_code: $data['PositionCode'] ?? null,
            synchronize_from_position_flag: $data['SynchronizeFromPositionFlag'] ?? false,
            job_id: $data['JobId'] ?? null,
            job_code: $data['JobCode'] ?? null,
            grade_id: $data['GradeId'] ?? null,
            grade_code: $data['GradeCode'] ?? null,
            grade_ladder_id: $data['GradeLadderId'] ?? null,
            grade_ladder_name: $data['GradeLadderName'] ?? null,
            grade_step_eligibility_flag: $data['GradeStepEligibilityFlag'] ?? false,
            grade_ceiling_step_id: $data['GradeCeilingStepId'] ?? null,
            grade_ceiling_step: $data['GradeCeilingStep'] ?? null,
            department_id: $data['DepartmentId'] ?? null,
            department_name: $data['DepartmentName'] ?? null,
            reporting_establishment_id: $data['ReportingEstablishmentId'] ?? null,
            reporting_establishment_name: $data['ReportingEstablishmentName'] ?? null,
            location_id: $data['LocationId'] ?? null,
            location_code: $data['LocationCode'] ?? null,
            work_at_home_flag: $data['WorkAtHomeFlag'] ?? false,
            assignment_category: $data['AssignmentCategory'] ?? null,
            worker_category: $data['WorkerCategory'] ?? null,
            permanent_temporary: $data['PermanentTemporary'] ?? null,
            full_part_time: $data['FullPartTime'] ?? null,
            manager_flag: $data['ManagerFlag'] ?? false,
            hourly_salaried_code: $data['HourlySalariedCode'] ?? null,
            normal_hours: $data['NormalHours'] ?? null,
            frequency: $data['Frequency'] ?? null,
            start_time: $data['StartTime'] ?? null,
            end_time: $data['EndTime'] ?? null,
            seniority_basis: $data['SeniorityBasis'] ?? null,
            probation_period: $data['ProbationPeriod'] ?? null,
            probation_period_unit: $data['ProbationPeriodUnit'] ?? null,
            probation_end_date: $data['ProbationEndDate'] ?? null,
            notice_period: $data['NoticePeriod'] ?? null,
            notice_period_uom: $data['NoticePeriodUOM'] ?? null,
            work_tax_address_id: $data['WorkTaxAddressId'] ?? null,
            expense_check_send_to_address: $data['ExpenseCheckSendToAddress'] ?? null,
            retirement_age: $data['RetirementAge'] ?? 0,
            retirement_date: $data['RetirementDate'] ?? null,
            labour_union_member_flag: $data['LabourUnionMemberFlag'] ?? false,
            union_id: $data['UnionId'] ?? null,
            union_name: $data['UnionName'] ?? null,
            bargaining_unit_code: $data['BargainingUnitCode'] ?? null,
            collective_agreement_id: $data['CollectiveAgreementId'] ?? null,
            collective_agreement_name: $data['CollectiveAgreementName'] ?? null,
            contract_id: $data['ContractId'] ?? null,
            contract_number: $data['ContractNumber'] ?? null,
            internal_building: $data['InternalBuilding'] ?? null,
            internal_floor: $data['InternalFloor'] ?? null,
            internal_office_number: $data['InternalOfficeNumber'] ?? null,
            internal_mailstop: $data['InternalMailstop'] ?? null,
            default_expense_account: $data['DefaultExpenseAccount'] ?? null,
            people_group: $data['PeopleGroup'] ?? null,
            standard_working_hours: $data['StandardWorkingHours'] ?? null,
            standard_frequency: $data['StandardFrequency'] ?? null,
            created_by: $data['CreatedBy'] ?? null,
            creation_date: $data['CreationDate'] ?? null,
            last_updated_by: $data['LastUpdatedBy'] ?? null,
            last_update_date: $data['LastUpdateDate'] ?? null,
            managers: array_key_exists('managers', $data)
                ? collect($data['managers'])
                    ->map(fn (array $managerData) => OracleManager::fromArray($managerData))
                : null,
        );
    }
}
